<html lang="en">
   <%-  include('../partials/header.ejs') %> 

  
     <%- include('../partials/nav.ejs')  %>     


     <div class="details content">
          <h2>  <%= blog.title %>  </h2>
          <div class="content">
        
       <p> <%= blog.body %> </p>
          </div>

         <a class="delete" data-doc="<%= blog._id %>"> 
            
              <img src="/trash.png" width="40px" height="40px"  alt="delete icon">    
                     </a>
        </div>


     <%- include('../partials/footer.ejs')  %> 

     <script> 
     // get the document and  add event listener
       const trashcan = document.querySelector('a.delete');
 
       trashcan.addEventListener('click', (e) => {
         const endpoint = `/blogs/${trashcan.dataset.doc}`;

         fetch(endpoint, {
            method: 'DELETE'
         })
         .then(response.json())
        .then(data => window.location.href = data.redirect)
         .catch(err =>
         console.log(err));
  });
   
   
   </script>
</body>
</html>